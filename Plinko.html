<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Plinko Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #0b3d91;
    color: white;
    text-align: center;
  }
  canvas {
    background: #003366;
    border: 4px solid gold;
    margin-top: 20px;
  }
  button {
    margin-top: 15px;
    padding: 12px 24px;
    font-size: 18px;
    cursor: pointer;
    background: gold;
    border: none;
    border-radius: 6px;
  }
  #result {
    margin-top: 15px;
    font-size: 22px;
    font-weight: bold;
  }
</style>
</head>

<body>

<h1>ðŸŽ¯ PLINKO</h1>
<p>Land in <strong>$10,000</strong> to WIN!</p>

<canvas id="plinko" width="400" height="600"></canvas><br>
<button onclick="dropChip()">Drop Chip</button>

<div id="result"></div>

<script>
const canvas = document.getElementById("plinko");
const ctx = canvas.getContext("2d");

const pegRows = 8;
const pegSpacing = 45;
const pegs = [];
const slots = ["$0", "$500", "$1,000", "$5,000", "$10,000", "$5,000", "$1,000", "$500", "$0"];

let chip = null;
let animation;

function setupPegs() {
  pegs.length = 0;
  for (let row = 0; row < pegRows; row++) {
    for (let col = 0; col <= row; col++) {
      pegs.push({
        x: canvas.width / 2 - row * pegSpacing / 2 + col * pegSpacing,
        y: 80 + row * pegSpacing
      });
    }
  }
}

function drawBoard() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw pegs
  ctx.fillStyle = "white";
  pegs.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
    ctx.fill();
  });

  // Draw slots
  const slotWidth = canvas.width / slots.length;
  for (let i = 0; i < slots.length; i++) {
    ctx.fillStyle = i === 4 ? "gold" : "#222";
    ctx.fillRect(i * slotWidth, canvas.height - 60, slotWidth, 60);
    ctx.fillStyle = "white";
    ctx.fillText(slots[i], i * slotWidth + 15, canvas.height - 20);
  }

  // Draw chip
  if (chip) {
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(chip.x, chip.y, 8, 0, Math.PI * 2);
    ctx.fill();
  }
}

function dropChip() {
  cancelAnimationFrame(animation);
  document.getElementById("result").textContent = "";

  chip = {
    x: canvas.width / 2,
    y: 30,
    row: 0
  };

  animate();
}

function animate() {
  chip.y += 3;

  if (chip.row < pegRows && chip.y > pegs[chip.row * (chip.row + 1) / 2]?.y) {
    const direction = Math.random() < 0.5 ? -1 : 1;
    chip.x += direction * pegSpacing / 2;
    chip.row++;
  }

  if (chip.y >= canvas.height - 60) {
    determineResult();
    return;
  }

  drawBoard();
  animation = requestAnimationFrame(animate);
}

function determineResult() {
  const slotWidth = canvas.width / slots.length;
  const index = Math.floor(chip.x / slotWidth);
  const prize = slots[Math.max(0, Math.min(slots.length - 1, index))];

  if (prize === "$10,000") {
    document.getElementById("result").textContent = "ðŸŽ‰ YOU WIN $10,000!";
  } else {
    document.getElementById("result").textContent = `You landed on ${prize}. Try again!`;
  }

  drawBoard();
}

setupPegs();
drawBoard();
</script>

</body>
</html>
